<div class="offcanvas-header">
  <h5 class="offcanvas-title">{{title}}</h5>
  <button type="button" class="btn-close text-reset" aria-label="Close" (click)="cancel()"></button>
</div>
<div class="offcanvas-body">
  <form [formGroup]="form">
    <h6>
      <i class="fa-solid fa-user me-2"></i>
      <span class="text-decoration-underline">Algemeen</span>
    </h6>
    <div class="row g-2 px-4 py-3 mt-3 mb-5 bg-secondary">
      <div class="col-md-3">
        <label for="inputCustomerNumber" class="form-label">Klantnummer</label>
        <input type="text" class="form-control form-control-sm" id="inputCustomerNumber" ngbAutofocus
          formControlName="customerNumber" />
      </div>
      <div class="col-md-9">
        <label for="inputContactName" class="form-label">Naam</label>
        <input type="text" class="form-control form-control-sm" id="inputContactName" ngbAutofocus
          formControlName="contactName" />
      </div>
      <div class="col-md-3">
        <label for="inputTaxNumber" class="form-label">BTW</label>
        <input type="text" class="form-control form-control-sm" id="inputTaxNumber" ngbAutofocus
          formControlName="taxNumber" />
      </div>
      <div class="col-md-9">
        <label for="inputDisplayName" class="form-label">Bedrijf</label>
        <input type="text" class="form-control form-control-sm" id="inputDisplayName" formControlName="displayName" />
      </div>

      <div class="col-md-6">
        <label for="inputEmail" class="form-label">Email</label>
        <input type="email" class="form-control form-control-sm" id="inputEmail" formControlName="email" />
      </div>
      <div class="col-md-6">
        <label for="inputPhone" class="form-label">Telefoonnummer</label>
        <input type="text" class="form-control form-control-sm" id="inputPhone" formControlName="phoneNumber" />
      </div>
    </div>

    <h6>
      <i class="fa-solid fa-location-dot me-2"></i>
      <span class="text-decoration-underline">Adresgegevens</span>
    </h6>
    <div class="row g-2 px-4 py-3 mt-3 bg-secondary">
      <div class="col-md-8">
        <label for="inputStreet" class="form-label">Straat</label>
        <input type="text" class="form-control form-control-sm" id="inputStreet" formControlName="billingStreet" />
      </div>
      <div class="col-md-2">
        <label for="inputNumber" class="form-label">Nummer</label>
        <input type="text" class="form-control form-control-sm" id="inputNumber" formControlName="billingNumber" />
      </div>
      <div class="col-md-2">
        <label for="inputNumberExtra" class="form-label">Bus</label>
        <input type="text" class="form-control form-control-sm" id="inputNumberExtra"
          formControlName="billingNumberExtra" />
      </div>
      <div class="col-md-2">
        <label for="inputZipCode" class="form-label">Postcode</label>
        <input type="text" class="form-control form-control-sm" id="inputZipCode" formControlName="billingZipCode" />
      </div>
      <div class="col-md-6">
        <label for="inputCity" class="form-label">Woonplaats</label>
        <input type="text" class="form-control form-control-sm" id="inputCity" formControlName="billingCity" />
      </div>
      <div class="col-md-4">
        <label for="inputCountry" class="form-label">Land</label>
        <input type="text" class="form-control form-control-sm" id="inputCountry" formControlName="billingCountry" />
      </div>
      <div class="col-md-12 mt-3">
        <div class="form-check form-switch">
          <input class="form-check-input" type="checkbox" role="switch" id="checkSameShipping" [checked]="sameShipping"
            (change)="sameShippingChanged()" [disabled]="adminProfile" />
          <label class="form-check-label" for="checkSameShipping">Leveringsadres is hetzelfde</label>
        </div>
      </div>
    </div>
    <div *ngIf="!sameShipping" class="row g-2 p-4 pt-1 bg-secondary">
      <div class="col-md-8">
        <label for="inputStreetShipping" class="form-label">Straat</label>
        <input type="text" class="form-control form-control-sm" id="inputStreetShipping"
          formControlName="shippingStreet" />
      </div>
      <div class="col-md-2">
        <label for="inputNumberShipping" class="form-label">Nummer</label>
        <input type="text" class="form-control form-control-sm" formControlName="shippingNumber" />
      </div>
      <div class="col-md-2">
        <label for="inputNumberExtraShipping" class="form-label">Bus</label>
        <input type="text" class="form-control form-control-sm" id="inputNumberExtraShipping"
          formControlName="shippingNumberExtra" />
      </div>
      <div class="col-md-2">
        <label for="inputZipCodeShipping" class="form-label">Postcode</label>
        <input type="text" class="form-control form-control-sm" id="inputZipCodeShipping"
          formControlName="shippingZipCode" />
      </div>
      <div class="col-md-6">
        <label for="inputCityShipping" class="form-label">Woonplaats</label>
        <input type="text" class="form-control form-control-sm" id="inputCityShipping" formControlName="shippingCity" />
      </div>
      <div class="col-md-4">
        <label for="inputCountryShipping" class="form-label">Land</label>
        <input type="text" class="form-control form-control-sm" id="inputCountryShipping"
          formControlName="shippingCountry" />
      </div>
    </div>

    <!-- TODO Autogenerate password by using "wi"+customernumber -->
    <!-- <div class="mb-3" *ngIf="action ==='create'">
      <label for="inputPassword" class="form-label">Paswoord</label>
      <input
        type="password"
        class="form-control form-control-sm"
        id="inputPassword"
        formControlName="password"
      />
    </div> -->

    <div class="d-flex justify-content-between mt-5" *ngIf="!adminProfile">
      <div class="btn-group" role="group" *ngIf="action ==='update'">
        <button [disabled]="loading" type="button" class="btn btn-sm btn-outline-danger" style="width: 32px"
          title="Verwijderen" (click)="delete()">
          <i class="fas fa-trash"></i>
        </button>
        <button [disabled]="loading" type="button" class="btn btn-sm btn-outline-danger" title="Reset paswoord"
          (click)="resetPassword()">
          <i class="fas fa-key"></i>
        </button>
      </div>
      <div class="w-100 text-end">
        <button [disabled]="loading" type="button" class="btn btn-sm btn-outline-primary rounded px-3 me-1"
          (click)="cancel()">
          <span>Annuleren</span>
          <i class="fas fa-ban"></i>
        </button>

        <button *ngIf="action ==='update'" geertsLoadingButton [loading]="loading" type="button"
          class="btn btn-sm btn-primary rounded px-3" [disabled]="!form.valid" (click)="update()">
          <span>Aanpassen</span>
          <i class="fas fa-check"></i>
        </button>
        <button *ngIf="action ==='create'" geertsLoadingButton [loading]="loading" type="button"
          class="btn btn-sm btn-primary rounded px-3" [disabled]="!form.valid" (click)="add()">
          <span>Aanmaken</span>
          <i class="fas fa-check"></i>
        </button>
      </div>
    </div>
  </form>
</div>

<ng-template #confirmDeleteUser>
  <geerts-cofirm-delete-user></geerts-cofirm-delete-user>
</ng-template>
<ng-template #confirmResetPassword>
  <geerts-cofirm-reset-password></geerts-cofirm-reset-password>
</ng-template>